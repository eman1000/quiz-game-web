(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{114:function(e,t,n){},116:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(26),c=n(31),l=n(25),i=n(22),u=n(21),s=n(54),m=n(71),d=n(59),p=n(60),h=n(14),f=n(41),g=n(73),b=n(66),E=n(72),w=n(29),v=n(57),j=n(61),O=n.n(j);var y={AUTH_USER:function(e,t){return O()(e,{isAuthenticated:{$set:t.payload}})}},_={isAuthenticated:!1};var k=n(65),N=n(62),S=n(2),I=n(8),x=new N.a({uri:"ws://".concat(window.location.host,"/graphql"),options:{reconnect:!0,timeout:1e6,reconnectionAttempts:20}}),C=Object(g.a)({uri:"/graphql"}),P=Object(k.a)(function(e,t){var n=t.headers,a=localStorage.getItem("jwtToken");return a?{headers:Object(f.a)({},n,{authorization:a?"Bearer ".concat(a):"","x-token":a})}:Object(f.a)({},n)}),D=Object(b.a)(function(e){var t=e.graphQLErrors,n=(e.networkError,e.operation),a=e.forward;if(t){var r=!0,o=!1,c=void 0;try{for(var l,i=t[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var u;switch(l.value.extensions.code){case"UNAUTHENTICATED":return console.log("jjj"),localStorage.removeItem("jwtToken"),console.log("jjj"),"/login"!==window.location.pathname&&(window.location.href="/login"),a(n);case"FORBIDDEN":return console.log("jjj4444"),localStorage.removeItem("jwtToken"),console.log("jjj"),"/login"!==window.location.pathname&&(window.location.href="/login"),a(n)}}}catch(u){o=!0,c=u}finally{try{r||null==i.return||i.return()}finally{if(o)throw c}}}}),A=Object(I.d)(function(e){var t=e.query,n=Object(S.l)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation},x,C),T=new w.a({link:D.concat(P.concat(A)),cache:new E.a}),M=Object(u.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,n=y[t.type];return n?n(e,t):e},home:v.a}),B=!("undefined"!==typeof window&&window.document&&window.document.createElement),U=n(68),R=n(39),X=n.n(R),q=n(52),$=n(19),H=n(12),L=n(30),W=n.n(L),F=n(32),J=n.n(F),G=(n(96),Object(H.g)(function(e){var t=e.user,n=t.avatar,o=t.coins,c=t.gems,l=t.firstName,i=Object(a.useState)(0),u=Object($.a)(i,2),s=u[0],m=u[1],d=Object(a.useState)(!1),p=Object($.a)(d,2),h=p[0],f=p[1];console.log("Current",e.current);var g={"/":{name:"Home",hasBack:!1},"category-details":{name:"Category Details",hasBack:!1},categories:{name:"Categories",hasBack:!1},"game-chest":{name:"Game Chest",hasBack:!1},"free-chest":{name:"Free Chest",hasBack:!1},profile:{name:"Profile",hasBack:!1},"play-room":{name:"Play Room",hasBack:!1},"pick-opponent":{name:"Pick Opponent",hasBack:!0},challeges:{name:"Challenges Opponent",hasBack:!0}},b=e.current.split("/")[1];return r.a.useEffect(function(){if("undefined"!=typeof window){var e=window.localStorage.getItem("numGamesPlayed");null!=e&&m(parseInt(e));var t=window.localStorage.getItem("freeChestCountDate");if(null!=t){var n=J()(t)<J()();f(n)}}},[]),r.a.createElement("div",{className:"header"},("/"===e.current||g[b]&&!g[b].hasBack)&&r.a.createElement("div",{className:"profile"},r.a.createElement("div",{className:"profile__top"},r.a.createElement("div",{className:"profile__user"},r.a.createElement("img",{src:n,className:"user__img"}),r.a.createElement("div",{className:"profile-name"},l)),r.a.createElement("div",{className:"profile__coins"},o)),r.a.createElement("div",{className:"profile__bottom"},r.a.createElement("button",{onClick:function(){return e.history.push("/game-chest")},disabled:s<10,className:"profile__game-chest ".concat(s<10?"disabled":"")},s,"/10"),r.a.createElement("button",{onClick:function(){return e.history.push("/free-chest")},disabled:!h,className:"profile__free-chest ".concat(h?"":"disabled")},"unlock"),r.a.createElement("div",{className:"profile__germs"},c)))||r.a.createElement("div",null,r.a.createElement("a",{href:"",onClick:function(t){t.preventDefault(),e.history.goBack()},className:"back"}),r.a.createElement("h3",null,g[b]&&g[b].name)))})),z=n(28),Q=n(50),K=W()("\n  query {\n    getMe{\n      id\n      username\n      firstName\n      lastName\n      gender\n      age\n      email\n      role\n      facebookId\n      avatar,\n      coins,\n      gems\n    }\n  }\n"),V=Object(i.d)(K,{})(function(e){var t=e.component,n=Object(z.a)(e,["component"]),o=n.data,c=o.loading,l=o.error,i=o.getMe;if(Object(a.useEffect)(function(){return function(){return console.log("clear")}},[]),c)return r.a.createElement(Q.a,null);if(l)return r.a.createElement("p",null,l.message);var u=!(!i||!i.hasOwnProperty("id"));return r.a.createElement(H.b,Object.assign({},n,{render:function(e){return r.a.createElement("div",null,u&&r.a.createElement(t,Object.assign({},e,{user:i}))||r.a.createElement(H.a,{to:"/login?redirect=".concat(window.location.pathname)}))}}))}),Y=n(69),Z=n.n(Y),ee=function(e){var t=e.component,n=Object(z.a)(e,["component"]),o=Z.a.parse(n.location.search),c=Object(a.useState)(!1),l=Object($.a)(c,2),i=l[0],u=(l[1],JSON.parse(localStorage.getItem("authUser")));u&&u.hasOwnProperty("id");return r.a.createElement(H.b,Object.assign({},n,{render:function(e){return i?r.a.createElement(H.a,{to:o.redirect||"/"}):r.a.createElement(t,e)}}))},te=n(16),ne=n.n(te),ae=n(119),re=n(118),oe=n(48),ce=function(){return r.a.createElement(oe.a,{id:"not-found",title:"Not Found",description:"This is embarrassing.",noCrawl:!0},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 mx-auto"},r.a.createElement("h3",{style:{textAlign:"center",margingTop:"60px"}},"404"),r.a.createElement("h1",{style:{textAlign:"center"}},"Super embarrassing."))))},le=ne()({loader:function(){return Promise.all([n.e(4),n.e(0)]).then(n.bind(null,254))},loading:function(){return null},modules:["home"]}),ie=ne()({loader:function(){return Promise.all([n.e(4),n.e(0)]).then(n.bind(null,249))},loading:function(){return null},modules:["categories"]}),ue=ne()({loader:function(){return Promise.all([n.e(4),n.e(0)]).then(n.bind(null,247))},loading:function(){return null},modules:["gameChest"]}),se=ne()({loader:function(){return Promise.all([n.e(4),n.e(0)]).then(n.bind(null,251))},loading:function(){return null},modules:["freeChest"]}),me=ne()({loader:function(){return Promise.all([n.e(4),n.e(0)]).then(n.bind(null,250))},loading:function(){return null},modules:["profile"]}),de=ne()({loader:function(){return Promise.all([n.e(4),n.e(0)]).then(n.bind(null,252))},loading:function(){return null},modules:["categoryDetails"]}),pe=ne()({loader:function(){return Promise.all([n.e(4),n.e(0)]).then(n.bind(null,246))},loading:function(){return null},modules:["playRoom"]}),he=ne()({loader:function(){return Promise.all([n.e(4),n.e(0)]).then(n.bind(null,253))},loading:function(){return null},modules:["pickOpponent"]}),fe=ne()({loader:function(){return Promise.all([n.e(4),n.e(0)]).then(n.bind(null,244))},loading:function(){return null},modules:["challenges"]}),ge=ne()({loader:function(){return Promise.all([n.e(4),n.e(0)]).then(n.bind(null,248))},loading:function(){return null},modules:["login"]}),be=ne()({loader:function(){return n.e(1).then(n.bind(null,245))},loading:function(){return null},modules:["logout"]}),Ee=function(){return r.a.createElement(ae.a,null,r.a.createElement(re.a,{classNames:"page",timeout:{enter:1e3,exit:1e3}},r.a.createElement(H.d,null,r.a.createElement(V,{exact:!0,path:"/",component:le}),r.a.createElement(V,{exact:!0,path:"/category-details/:id",component:de}),r.a.createElement(V,{exact:!0,path:"/categories",component:ie}),r.a.createElement(V,{exact:!0,path:"/game-chest",component:ue}),r.a.createElement(V,{exact:!0,path:"/free-chest",component:se}),r.a.createElement(V,{exact:!0,path:"/profile",component:me}),r.a.createElement(V,{exact:!0,path:"/challenges",component:fe}),r.a.createElement(V,{exact:!0,path:"/play-room/:matchId",component:pe}),r.a.createElement(V,{exact:!0,path:"/pick-opponent/:categoryId",component:he}),r.a.createElement(ee,{exact:!0,path:"/login",component:ge}),r.a.createElement(V,{exact:!0,path:"/logout",component:be}),r.a.createElement(H.b,{component:ce}))))},we=n(47),ve=n.n(we),je=function(){return r.a.createElement("div",{className:ve.a.matchModal},r.a.createElement("div",{className:ve.a.container},r.a.createElement("h1",null,"New challenge!"),r.a.createElement("button",null,"Accept Match")))};function Oe(){var e=Object(U.a)(["\n  mutation updateUser($id: ID !, $date: Date){\n    updateUser(id:$id, lastSeen:$date){\n      lastSeen\n    }\n  }\n"]);return Oe=function(){return e},e}W()("\n  subscription($matchId: ID!){\n    matchUpdated(matchId:$matchId){\n      match{\n        id\n        status\n        matchUsers{\n          userId\n          matchId\n        }\n        results{\n          id\n          matchId\n          questionId\n          answerId\n          isCorrect\n          id\n        }\n      }\n    }\n  }\n");var ye=W()(Oe()),_e=Object(i.d)(ye,{})(Object(H.g)(Object(i.e)(function(e){var t=Object(a.useState)(null),n=Object($.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)({}),i=Object($.a)(l,2),u=i[0],s=(i[1],Object(a.useState)(0)),m=Object($.a)(s,2);m[0],m[1];return Object(a.useEffect)(function(){return e.client.query({query:K}).then(function(e){var t=e.data.getMe;c(t)}),"undefined"!=typeof window&&null==window.localStorage.getItem("freeChestCountDate")&&window.localStorage.setItem("freeChestCountDate",J()(Date.now()).add(24,"hours").toString()),function(){return console.log("clear")}},[]),function(e,t){var n=Object(a.useRef)();Object(a.useEffect)(function(){n.current=e},[e]),Object(a.useEffect)(function(){if(null!==t){var e=setInterval(function(){n.current()},t);return function(){return clearInterval(e)}}},[t])}(Object(q.a)(X.a.mark(function e(){return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),2e3),r.a.createElement("div",null,o&&r.a.createElement(G,{isAuthenticated:!0,current:window.location.pathname,user:o}),r.a.createElement("div",{id:"content"},"pending"===u.status&&r.a.createElement(je,null),r.a.createElement(Ee,null)))})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(74),n(114);var ke=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=Object(h.a)(),t=Object(p.createLogger)({diff:!0,collapsed:!0}),n=[d.a,Object(s.a)(e)];n.push(t);var a=u.d.apply(void 0,[u.a.apply(void 0,n)].concat([])),r=B?{}:window.__PRELOADED_STATE__;B||delete window.__PRELOADED_STATE__;var o=Object(m.a)(e);return{store:Object(u.e)(o(M),r,a),history:e}}(),Ne=ke.store,Se=(ke.history,a.createElement(i.a,{client:T},a.createElement(c.a,{store:Ne},a.createElement(l.a,null,a.createElement(_e,null))))),Ie=document.querySelector("#root");Object(o.render)(Se,Ie),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},47:function(e,t,n){e.exports={matchModal:"MatchNotification_matchModal__1-3HC",container:"MatchNotification_container__SkLWb"}},48:function(e,t,n){"use strict";var a=n(28),r=n(0),o=n.n(r),c=n(12),l=n(70),i=n.n(l),u="".concat("app url");t.a=Object(c.g)(function(e){var t=e.children,n=e.id,r=e.className,c=Object(a.a)(e,["children","id","className"]);return o.a.createElement("div",{id:n,className:r},o.a.createElement(i.a,{htmlAttributes:{lang:"en",itemscope:void 0,itemtype:"http://schema.org/".concat(c.schema||"WebPage")},title:c.title?c.title+" | Sam Media":"Sam Media",link:[{rel:"canonical",href:"app url"+e.location.pathname}],meta:function(e,t){var n=e.title,a=e.description,r=e.image,o=e.contentType,c=e.twitter,l=e.noCrawl,i=e.published,s=e.updated,m=e.category,d=e.tags,p=n?(n+" | Sam Media").substring(0,60):"Sam Media",h=a?a.substring(0,155):"Sam Media",f=r?"".concat("app url").concat(r):u,g=[{itemprop:"name",content:p},{itemprop:"description",content:h},{itemprop:"image",content:f},{name:"description",content:h},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:site",content:"@sam-media"},{name:"twitter:title",content:p},{name:"twitter:description",content:h},{name:"twitter:creator",content:c||"@sam-media"},{name:"twitter:image:src",content:f},{property:"og:title",content:p},{property:"og:type",content:o||"website"},{property:"og:url",content:"app url"+t},{property:"og:image",content:f},{property:"og:description",content:h},{property:"og:site_name",content:"Sam Media"},{property:"fb:app_id",content:"XXXXXXXXX"}];return l&&g.push({name:"robots",content:"noindex, nofollow"}),i&&g.push({name:"article:published_time",content:i}),s&&g.push({name:"article:modified_time",content:s}),m&&g.push({name:"article:section",content:m}),d&&g.push({name:"article:tag",content:d}),g}(c,e.location.pathname)}),t)})},50:function(e,t,n){"use strict";var a=n(0),r=n.n(a);n(97);t.a=function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"logo small"}),r.a.createElement("div",{className:"loader"}))}},57:function(e,t,n){"use strict";var a=n(49);n.d(t,"a",function(){return c}),Object(a.a)({AUTH_USER:"AUTH_USER"});var r={},o={};function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0,n=r[t.type];return n?n(e,t):e}},74:function(e,t,n){},76:function(e,t,n){e.exports=n(116)},96:function(e,t,n){},97:function(e,t,n){}},[[76,3,5]]]);
//# sourceMappingURL=main.effa3a0f.chunk.js.map